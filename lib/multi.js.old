//some default pre init
var Countly = Countly || {};
Countly.q = Countly.q || [];

//provide countly initialization parameters
Countly.app_key = "YOUR_APP_KEY";
Countly.url = "https://try.count.ly"; //your server goes here
Countly.debug = true;

Countly.getViewName = function(){
            console.log("new view name", this.val);
        };
Countly.init = function (ob) {
    var inst = new function(){
        this.app_key = ob && ob.app_key || Countly.app_key;
        this.val = "a";
        this.track_session = function(){
            console.log("tracking session", this.app_key);
            this.getViewName();
        }
        this.getViewName = function(){
            console.log("getViewName", this.val);
        }
    };
    
    if (!Countly.i) {
        Countly.i = [];
        Countly.i.push(inst);
        for (key in inst) {
            if (!Countly[key]) {
                Countly[key] = inst[key];
            }
        }
    }
    else {
        Countly.i.push(inst);
    }
    return inst;
};

Countly.init();
Countly.track_session();
Countly.init({app_key:"second one"});
Countly.track_session();
Countly.i[1].track_session();
Countly.getViewName();